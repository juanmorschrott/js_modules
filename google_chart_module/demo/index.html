<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script src="jquery.js"></script>
	<script type="text/javascript" src="https://www.google.com/jsapi"></script>
</head>
<body>
	<div id="chart1"></div>
	<div id="chart2"></div>

	<script type="text/javascript">

		$(document).ready(function() {

			// module use case example
			google_chart_module.addChart({
				'element': 'chart1',
				'columns': [
				{
					type: 'number',
					value: 'X'
				},
				{
					type: 'number',
					value: 'Dogs'
				}
				],
				'options': {
					width: 500,
					height: 100,
					hAxis: {
						title: 'Time'
					},
					vAxis: {
						title: 'Popularity'
					}
				},
				'data': [
				[0, 0],   [1, 10],  [2, 23],
				[3, 17],  [4, 18],  [5, 9],
				[6, 11],  [7, 27],  [8, 33],
				[9, 40],  [10, 32], [11, 35],
				[12, 30], [13, 40], [14, 42],
				[15, 47], [16, 44], [17, 48],
				[18, 52], [19, 54], [20, 42],
				[21, 55], [22, 56], [23, 57],
				[24, 60], [25, 50], [26, 52],
				]
			});

			google_chart_module.addChart({
				'element': 'chart2',
				'columns': [
				{
					type: 'number',
					value: 'X'
				},
				{
					type: 'number',
					value: 'Cats'
				}
				],
				'options': {
					width: 500,
					height: 100,
					hAxis: {
						title: 'Time'
					},
					vAxis: {
						title: 'Popularity'
					}
				},
				'data': [
				[0, 0],   [1, 10],  [2, 23],
				[3, 17],  [4, 18],  [5, 9]
				]
			});

			google_chart_module.init();
			// --- end

		});

var google_chart_module = (function() {

	google.load('visualization', '1', { packages: ['corechart'] });
		    // google.setOnLoadCallback(drawCharts);

		    var charts = [];

		    function drawCharts() {
		    	simpleChartsConfigCheck();

		    	var dataTables = createDataTables();
		    	setDataTablesRows(dataTables);

		    }

		    /**
		    * Very basic check for passed configuration options
		    *
		    */
		    function simpleChartsConfigCheck() {
		    	for (var chart in charts) {
		    		assert(charts[chart].element);
		    		assert(charts[chart].columns);
		    		assert(charts[chart].options);
		    		assert(charts[chart].data);
		    	}
		    }

		    function assert(condition, message) {
		    	if (!condition) {
		    		message = message || "Assertion failed";
		    		if (typeof Error !== "undefined") {
		    			throw new Error(message);
		    		}
			        throw message; // Fallback
			    }
			}

			/**
			* Creates an array containing the needed data tables and set itÂ´s
			* columns
			*
			*/
			function createDataTables(dataTables) {
		    	simpleChartsConfigCheck();	// We check if the charts configs are OK

		    	var dataTables = [];

		    	for (var chart in charts) {
		    		var data = new google.visualization.DataTable();

		    		for (var columns in charts[chart].columns) {
		    			var type = charts[chart].columns[columns].type;
		    			var value = charts[chart].columns[columns].value;

		    			data.addColumn( type, value );

		    		}
		    		dataTables.push( data );
		    	}
		    	return dataTables;
		    }

		    /**
		    * Set the data tables rows and fill them with the given data.
		    *
		    */
		    function setDataTablesRows(dataTables) {
		    	for (var i in dataTables) {
		    		var e = document.getElementById(charts[i].element);
		    		var d = charts[i].data;
		    		var o = charts[i].options;

		    		dataTables[i].addRows(d);
		    		var chart = new google.visualization.LineChart(e);
		    		chart.draw(dataTables[i], o);

		    	}
		    }

		    return {

		    	init: function() {
		    		drawCharts();
		    	},

		    	addChart: function( chart ) {
		    		charts.push(chart);
		    	}
		    }

		})();

	</script>

</body>
</html>